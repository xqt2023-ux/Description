# Studio Sound éŸ³é¢‘å¢å¼º - æŠ€æœ¯è§„èŒƒæ–‡æ¡£

> **åŠŸèƒ½ç¼–å·**: AUDIO-001  
> **åˆ›å»ºæ—¥æœŸ**: 2026-02-09  
> **çŠ¶æ€**: å¾…å¼€å‘  
> **é¢„è®¡å·¥æ—¶**: 2-3å°æ—¶

---

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

ä¸ºä¸Šä¼ çš„éŸ³é¢‘/è§†é¢‘è‡ªåŠ¨åº”ç”¨AIéŸ³é¢‘å¢å¼ºå¤„ç†ï¼Œæå‡åˆ°å½•éŸ³æ£šçº§åˆ«çš„éŸ³è´¨ã€‚

### æ ¸å¿ƒç‰¹æ€§

1. âœ… **èƒŒæ™¯å™ªéŸ³æ¶ˆé™¤** - å»é™¤å˜¶å˜¶å£°ã€å—¡å—¡å£°ã€ç¯å¢ƒæ‚éŸ³
2. âœ… **éŸ³é‡æ ‡å‡†åŒ–** - è‡ªåŠ¨è°ƒæ•´éŸ³é‡åˆ°æ ‡å‡†æ°´å¹³
3. âœ… **éŸ³è´¨å¢å¼º** - æå‡æ¸…æ™°åº¦å’Œé¢‘ç‡å“åº”
4. âœ… **å›å£°æ¶ˆé™¤** - å»é™¤æˆ¿é—´å›å£°å’Œæ··å“

### åº”ç”¨åœºæ™¯

- **æ’­å®¢å½•åˆ¶**ï¼šæå‡å®¶åº­å½•åˆ¶éŸ³è´¨
- **è§†é¢‘æ—ç™½**ï¼šæ¶ˆé™¤ç¯å¢ƒå™ªéŸ³
- **ä¼šè®®å½•éŸ³**ï¼šå¢å¼ºè¯­éŸ³æ¸…æ™°åº¦
- **é‡‡è®¿å½•éŸ³**ï¼šæ ‡å‡†åŒ–éŸ³é‡

---

## ğŸ¯ ç”¨æˆ·ä½“éªŒ

### ä½¿ç”¨æµç¨‹

```
ç”¨æˆ·ä¸Šä¼ è§†é¢‘/éŸ³é¢‘
     â†“
æ˜¾ç¤º"æ­£åœ¨å¢å¼ºéŸ³é¢‘..."è¿›åº¦
     â†“
åå°è‡ªåŠ¨è°ƒç”¨AIæœåŠ¡
     â†“
éŸ³é¢‘å¢å¼ºå®Œæˆ
     â†“
ç»§ç»­è½¬å½•ç­‰åç»­å¤„ç†
```

### UIå±•ç¤º

**ä¸Šä¼ æ—¶æç¤º**ï¼š
- "æ­£åœ¨ä¼˜åŒ–éŸ³è´¨..."
- "Studio Sound: æ¶ˆé™¤èƒŒæ™¯å™ªéŸ³ä¸­..."
- "Studio Sound: å®Œæˆï¼éŸ³è´¨å·²æå‡"

**ç»“æœå¯¹æ¯”**ï¼ˆå¯é€‰ï¼‰ï¼š
- åŸå§‹éŸ³é¢‘æ³¢å½¢
- å¢å¼ºåéŸ³é¢‘æ³¢å½¢
- ä¸€é”®åˆ‡æ¢è¯•å¬

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Frontend Upload                   â”‚
â”‚  - æ–‡ä»¶ä¸Šä¼                                â”‚
â”‚  - è¿›åº¦æ˜¾ç¤º                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTP Upload
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Backend Upload Handler             â”‚
â”‚  1. ä¿å­˜åŸå§‹æ–‡ä»¶                          â”‚
â”‚  2. æå–éŸ³é¢‘ï¼ˆå¦‚æœæ˜¯è§†é¢‘ï¼‰                  â”‚
â”‚  3. è°ƒç”¨ audioEnhancement.ts            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Adobe Podcast API / å…¶ä»–AIæœåŠ¡         â”‚
â”‚  - Enhance Speech                       â”‚
â”‚  - é™å™ªã€æ ‡å‡†åŒ–ã€å¢å¼º                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Replace Original Audio               â”‚
â”‚  - ä¿å­˜å¢å¼ºåçš„éŸ³é¢‘                        â”‚
â”‚  - æ›´æ–°Mediaè®°å½•                          â”‚
â”‚  - ç»§ç»­è½¬å½•æµç¨‹                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯æ–¹æ¡ˆï¼šAdobe Podcast API

### ä¸ºä»€ä¹ˆé€‰æ‹©Adobe Podcast

1. **ä¸“ä¸šæ•ˆæœ**ï¼šå½•éŸ³æ£šçº§éŸ³è´¨
2. **ä¸€é”®å¤„ç†**ï¼šå•ä¸ªAPIè°ƒç”¨å®Œæˆæ‰€æœ‰å¢å¼º
3. **å…è´¹é¢åº¦**ï¼šæ¯æœˆæœ‰å…è´¹é¢åº¦
4. **ç®€å•é›†æˆ**ï¼šRESTful APIï¼Œæ˜“äºä½¿ç”¨

### APIè§„æ ¼

**Endpoint**:
```
POST https://podcast.adobe.io/audio/speech-enhance
```

**è¯·æ±‚**:
```http
POST /audio/speech-enhance HTTP/1.1
Host: podcast.adobe.io
Authorization: Bearer YOUR_API_KEY
Content-Type: multipart/form-data

--boundary
Content-Disposition: form-data; name="file"; filename="audio.mp3"
Content-Type: audio/mpeg

[éŸ³é¢‘æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®]
--boundary--
```

**å“åº”**:
```json
{
  "success": true,
  "enhancedAudioUrl": "https://cdn.adobe.io/enhanced/abc123.mp3",
  "processingTime": 12.5,
  "improvements": {
    "noiseReduction": "85%",
    "volumeNormalized": true,
    "echoRemoval": true
  }
}
```

### å®šä»·

- **å…è´¹é¢åº¦**ï¼šæ¯æœˆ100åˆ†é’Ÿ
- **ä»˜è´¹**ï¼š$0.02/åˆ†é’Ÿï¼ˆè¶…å‡ºå…è´¹é¢åº¦åï¼‰

---

## ğŸ“Š æ•°æ®ç»“æ„è®¾è®¡

### Mediaå…ƒæ•°æ®æ‰©å±•

```typescript
// shared/types/index.ts

export interface MediaMetadata {
  width?: number;
  height?: number;
  fps?: number;
  codec?: string;
  bitrate?: number;
  
  // æ–°å¢ï¼šéŸ³é¢‘å¢å¼ºä¿¡æ¯
  audioEnhanced?: boolean;           // æ˜¯å¦å·²å¢å¼º
  audioEnhancementStatus?: 'pending' | 'processing' | 'completed' | 'failed';
  originalAudioPath?: string;        // åŸå§‹éŸ³é¢‘è·¯å¾„ï¼ˆå¤‡ä»½ï¼‰
  enhancedAudioPath?: string;        // å¢å¼ºåéŸ³é¢‘è·¯å¾„
  enhancementStats?: AudioEnhancementStats;
}

export interface AudioEnhancementStats {
  noiseReductionLevel: number;      // é™å™ªçº§åˆ« 0-100
  volumeAdjustment: number;         // éŸ³é‡è°ƒæ•´ dB
  processingTime: number;           // å¤„ç†è€—æ—¶ï¼ˆç§’ï¼‰
  provider: 'adobe' | 'krisp' | 'local'; // ä½¿ç”¨çš„æœåŠ¡
}
```

---

## ğŸ’» ä»£ç å®ç°

### 1. Adobe Podcast APIé›†æˆ

```typescript
// backend/src/services/audioEnhancement.ts

import FormData from 'form-data';
import fs from 'fs';
import axios from 'axios';
import { AudioEnhancementStats } from '../../../shared/types';

const ADOBE_API_KEY = process.env.ADOBE_PODCAST_API_KEY;
const ADOBE_ENDPOINT = 'https://podcast.adobe.io/audio/speech-enhance';

export interface AudioEnhancementResult {
  success: boolean;
  enhancedAudioPath: string;
  stats: AudioEnhancementStats;
  error?: string;
}

/**
 * ä½¿ç”¨Adobe Podcast APIå¢å¼ºéŸ³é¢‘
 */
export async function enhanceAudioWithAdobe(
  audioPath: string,
  outputPath: string
): Promise<AudioEnhancementResult> {
  try {
    console.log('[AudioEnhancement] Starting enhancement with Adobe Podcast...');
    const startTime = Date.now();

    // åˆ›å»ºè¡¨å•æ•°æ®
    const formData = new FormData();
    formData.append('file', fs.createReadStream(audioPath));
    formData.append('noiseReduction', 'high');
    formData.append('volumeNormalization', 'true');
    formData.append('echoRemoval', 'true');

    // è°ƒç”¨API
    const response = await axios.post(ADOBE_ENDPOINT, formData, {
      headers: {
        ...formData.getHeaders(),
        'Authorization': `Bearer ${ADOBE_API_KEY}`,
      },
      timeout: 300000, // 5åˆ†é’Ÿè¶…æ—¶
    });

    // ä¸‹è½½å¢å¼ºåçš„éŸ³é¢‘
    const enhancedAudioUrl = response.data.enhancedAudioUrl;
    const audioResponse = await axios.get(enhancedAudioUrl, {
      responseType: 'stream'
    });

    // ä¿å­˜åˆ°æœ¬åœ°
    await new Promise((resolve, reject) => {
      const writer = fs.createWriteStream(outputPath);
      audioResponse.data.pipe(writer);
      writer.on('finish', resolve);
      writer.on('error', reject);
    });

    const processingTime = (Date.now() - startTime) / 1000;

    console.log(`[AudioEnhancement] Completed in ${processingTime}s`);

    return {
      success: true,
      enhancedAudioPath: outputPath,
      stats: {
        noiseReductionLevel: response.data.improvements.noiseReduction || 0,
        volumeAdjustment: response.data.improvements.volumeAdjustment || 0,
        processingTime,
        provider: 'adobe',
      },
    };

  } catch (error: any) {
    console.error('[AudioEnhancement] Failed:', error);
    return {
      success: false,
      enhancedAudioPath: '',
      stats: {
        noiseReductionLevel: 0,
        volumeAdjustment: 0,
        processingTime: 0,
        provider: 'adobe',
      },
      error: error.message,
    };
  }
}

/**
 * ä¸»éŸ³é¢‘å¢å¼ºå‡½æ•°ï¼ˆæ”¯æŒå¤šç§åç«¯ï¼‰
 */
export async function enhanceAudio(
  audioPath: string,
  outputPath: string
): Promise<AudioEnhancementResult> {
  // ä¼˜å…ˆä½¿ç”¨Adobe
  if (process.env.ADOBE_PODCAST_API_KEY) {
    return enhanceAudioWithAdobe(audioPath, outputPath);
  }

  // å…¶ä»–å¤‡ç”¨æ–¹æ¡ˆ...
  throw new Error('No audio enhancement service configured');
}
```

### 2. é›†æˆåˆ°ä¸Šä¼ æµç¨‹

```typescript
// backend/src/routes/media.ts (æ›´æ–°)

import { enhanceAudio } from '../services/audioEnhancement';

router.post('/upload', upload.single('file'), async (req, res) => {
  try {
    const file = req.file;
    if (!file) {
      return res.status(400).json({ error: 'No file uploaded' });
    }

    // ... ä¿å­˜æ–‡ä»¶é€»è¾‘ ...

    // æ–°å¢ï¼šè‡ªåŠ¨éŸ³é¢‘å¢å¼º
    if (process.env.ENABLE_AUTO_AUDIO_ENHANCEMENT === 'true') {
      console.log('[Upload] Auto-enhancing audio...');
      
      let audioPath = file.path;
      
      // å¦‚æœæ˜¯è§†é¢‘ï¼Œå…ˆæå–éŸ³é¢‘
      if (isVideoFile(file.path)) {
        audioPath = await extractAudioFromVideo(file.path);
      }

      // éŸ³é¢‘å¢å¼º
      const enhancedPath = audioPath.replace('.mp3', '_enhanced.mp3');
      const enhancementResult = await enhanceAudio(audioPath, enhancedPath);

      if (enhancementResult.success) {
        // æ›¿æ¢åŸå§‹éŸ³é¢‘
        fs.renameSync(enhancedPath, audioPath);
        
        // æ›´æ–°metadata
        mediaRecord.metadata.audioEnhanced = true;
        mediaRecord.metadata.audioEnhancementStatus = 'completed';
        mediaRecord.metadata.enhancementStats = enhancementResult.stats;
        
        console.log('[Upload] Audio enhancement completed');
      } else {
        console.warn('[Upload] Audio enhancement failed, using original');
      }
    }

    // ç»§ç»­è½¬å½•ç­‰åç»­æµç¨‹...
    res.json({ success: true, media: mediaRecord });

  } catch (error) {
    // é”™è¯¯å¤„ç†...
  }
});
```

### 3. å‰ç«¯è¿›åº¦æ˜¾ç¤º

```typescript
// frontend/src/components/editor/MediaUploader.tsx (æ›´æ–°)

export function MediaUploader() {
  const [uploadStage, setUploadStage] = useState<'upload' | 'enhance' | 'transcribe' | 'done'>('upload');

  const handleUpload = async (file: File) => {
    try {
      // ä¸Šä¼ é˜¶æ®µ
      setUploadStage('upload');
      const formData = new FormData();
      formData.append('file', file);

      const response = await fetch('/api/media/upload', {
        method: 'POST',
        body: formData,
        onUploadProgress: (e) => {
          // ä¸Šä¼ è¿›åº¦
        }
      });

      // å¢å¼ºé˜¶æ®µ
      setUploadStage('enhance');
      // APIä¼šè‡ªåŠ¨å¢å¼ºï¼Œç­‰å¾…å®Œæˆ

      // è½¬å½•é˜¶æ®µ
      setUploadStage('transcribe');
      // ...

    } catch (error) {
      // é”™è¯¯å¤„ç†
    }
  };

  return (
    <div>
      {uploadStage === 'enhance' && (
        <div className="flex items-center gap-2">
          <Loader className="animate-spin" />
          <span>æ­£åœ¨ä¼˜åŒ–éŸ³è´¨ï¼ˆStudio Soundï¼‰...</span>
        </div>
      )}
    </div>
  );
}
```

---

## ğŸ§ª æµ‹è¯•è®¡åˆ’

### å•å…ƒæµ‹è¯•

```typescript
// backend/src/__tests__/audioEnhancement.test.ts

describe('Audio Enhancement', () => {
  test('should enhance audio with Adobe API', async () => {
    const inputPath = 'test/fixtures/sample.mp3';
    const outputPath = 'test/output/enhanced.mp3';
    
    const result = await enhanceAudioWithAdobe(inputPath, outputPath);
    
    expect(result.success).toBe(true);
    expect(result.enhancedAudioPath).toBe(outputPath);
    expect(result.stats.noiseReductionLevel).toBeGreaterThan(0);
  });

  test('should fallback gracefully on API failure', async () => {
    // æµ‹è¯•APIå¤±è´¥æ—¶çš„fallback
  });
});
```

### é›†æˆæµ‹è¯•

```typescript
// æµ‹è¯•åœºæ™¯
1. ä¸Šä¼ å¸¦å™ªéŸ³çš„éŸ³é¢‘ â†’ éªŒè¯å™ªéŸ³è¢«æ¶ˆé™¤
2. ä¸Šä¼ ä½éŸ³é‡éŸ³é¢‘ â†’ éªŒè¯éŸ³é‡è¢«æ ‡å‡†åŒ–
3. ä¸Šä¼ è§†é¢‘æ–‡ä»¶ â†’ éªŒè¯éŸ³é¢‘è¢«æå–å¹¶å¢å¼º
4. APIå¤±è´¥ â†’ éªŒè¯ç³»ç»Ÿä»èƒ½æ­£å¸¸å·¥ä½œï¼ˆä½¿ç”¨åŸå§‹éŸ³é¢‘ï¼‰
```

---

## ğŸ“ ç¯å¢ƒé…ç½®

### .envé…ç½®

```bash
# Adobe Podcast API
ADOBE_PODCAST_API_KEY=your_api_key_here

# åŠŸèƒ½å¼€å…³
ENABLE_AUTO_AUDIO_ENHANCEMENT=true

# å¯é€‰ï¼šå…¶ä»–éŸ³é¢‘å¢å¼ºæœåŠ¡
# KRISP_API_KEY=your_krisp_key
# DOLBY_API_KEY=your_dolby_key
```

### è·å–Adobe API Key

1. è®¿é—® https://podcast.adobe.com/
2. æ³¨å†Œ/ç™»å½•Adobeè´¦å·
3. è¿›å…¥API Keysé¡µé¢
4. åˆ›å»ºæ–°çš„API Key
5. å¤åˆ¶å¹¶ä¿å­˜åˆ°.envæ–‡ä»¶

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### é™åˆ¶ä¸çº¦æŸ

1. **å¤„ç†æ—¶é—´**ï¼šé€šå¸¸ä¸ºéŸ³é¢‘æ—¶é•¿çš„0.5-1å€
2. **æ–‡ä»¶å¤§å°**ï¼šæœ€å¤§500MB
3. **æ ¼å¼æ”¯æŒ**ï¼šMP3, WAV, M4A, FLAC
4. **å…è´¹é¢åº¦**ï¼šæ¯æœˆ100åˆ†é’Ÿï¼Œè¶…å‡ºåæŒ‰ä½¿ç”¨é‡è®¡è´¹

### å·²çŸ¥é—®é¢˜

1. **éŸ³ä¹å¤„ç†**ï¼šå¯èƒ½è¿‡åº¦å¤„ç†èƒŒæ™¯éŸ³ä¹
2. **å¤šè¯´è¯äºº**ï¼šå¯¹é‡å è¯­éŸ³æ•ˆæœä¸€èˆ¬
3. **æç«¯å™ªéŸ³**ï¼šéå¸¸å˜ˆæ‚çš„ç¯å¢ƒå¯èƒ½æ— æ³•å®Œå…¨æ¶ˆé™¤

### è§£å†³æ–¹æ¡ˆ

- æä¾›"è·³è¿‡å¢å¼º"é€‰é¡¹
- ä¿ç•™åŸå§‹éŸ³é¢‘å¤‡ä»½
- å…è®¸ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢åŸå§‹/å¢å¼ºç‰ˆæœ¬

---

## ğŸ“… å¼€å‘æ’æœŸ

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ |
|------|------|---------|
| Phase 1 | Adobe APIé›†æˆ | 1å°æ—¶ |
| Phase 2 | ä¸Šä¼ æµç¨‹é›†æˆ | 30åˆ†é’Ÿ |
| Phase 3 | å‰ç«¯è¿›åº¦æ˜¾ç¤º | 30åˆ†é’Ÿ |
| Phase 4 | æµ‹è¯•ä¸ä¼˜åŒ– | 30åˆ†é’Ÿ |

**æ€»è®¡**: 2.5-3å°æ—¶

---

## âœ… éªŒæ”¶æ ‡å‡†

1. âœ… ä¸Šä¼ éŸ³é¢‘/è§†é¢‘è‡ªåŠ¨è§¦å‘éŸ³é¢‘å¢å¼º
2. âœ… æ˜¾ç¤ºå¢å¼ºè¿›åº¦å’ŒçŠ¶æ€
3. âœ… èƒŒæ™¯å™ªéŸ³æ˜æ˜¾å‡å°‘
4. âœ… éŸ³é‡æ ‡å‡†åŒ–åˆ°åˆé€‚æ°´å¹³
5. âœ… éŸ³è´¨æ¸…æ™°åº¦æå‡
6. âœ… å›å£°åŸºæœ¬æ¶ˆé™¤
7. âœ… å¢å¼ºå¤±è´¥æ—¶èƒ½graceful fallback
8. âœ… å¤„ç†æ—¶é—´ < éŸ³é¢‘æ—¶é•¿ Ã— 2

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Adobe Podcast APIæ–‡æ¡£](https://podcast.adobe.com/api-docs)
- [éŸ³é¢‘å¤„ç†æœ€ä½³å®è·µ](https://developer.adobe.com/podcast/docs/best-practices)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2026-02-09  
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸
